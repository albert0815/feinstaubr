<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
			xmlns:ui="http://java.sun.com/jsf/facelets">

<f:metadata>
	<f:viewParam name="sensorId" value="#{indexViewController.sensorId}" />
	<f:event type="preRenderView" listener="#{indexViewController.init}" />
</f:metadata>

<head>
<title>Feinstaubr</title>
<!-- from https://material.io/components -->
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script type="text/javascript"
	src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<link rel="stylesheet"
	href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet" />
<style>
.chart{
	height:15rem;
}
.hidden{
	display:none;
}
</style>
</head>
<body class="mdc-typography">
	<header class="mdc-toolbar mdc-toolbar--fixed">
	  <div class="mdc-toolbar__row">
	    <section class="mdc-toolbar__section mdc-toolbar__section--align-start">
	    	<a 
	    		href="#" 
	    		class="material-icons mdc-toolbar__menu-icon menu" 
	    		data-mdc-auto-init="MDCRipple">menu</a>
	      <span class="mdc-toolbar__title">Feinstaubr</span>
	    </section>
	  </div>
	  <div id="progressbar" role="progressbar" class="mdc-linear-progress mdc-linear-progress--indeterminate">
		  <div class="mdc-linear-progress__buffering-dots"></div>
		  <div class="mdc-linear-progress__buffer"></div>
		  <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
		    <span class="mdc-linear-progress__bar-inner"></span>
		  </div>
		  <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
		    <span class="mdc-linear-progress__bar-inner"></span>
		  </div>
	</div>				
	  
	</header>
	<aside id="main-menu" class="mdc-drawer mdc-drawer--temporary mdc-typography" data-mdc-auto-init="MDCTemporaryDrawer">
	  <nav class="mdc-drawer__drawer">
	  	<div class="mdc-drawer__toolbar-spacer mdc-theme--primary-bg mdc-theme--text-primary-on-primary">Feinstaubr Navigation</div>
	    <nav class="mdc-drawer__content mdc-list">
	      <a class="mdc-list-item mdc-list-item--activated" href="/">
	      	<i class="material-icons mdc-list-item__graphic" aria-hidden="true">home</i>Home
	      </a>
	      <a class="mdc-list-item" href="/forecast.xhtml">
	        <i class="material-icons mdc-list-item__graphic" aria-hidden="true">star</i>Forecast
	      </a>
	    </nav>
	  </nav>
	</aside>
		
	<main class="mdc-toolbar-fixed-adjust">
	
	
	<div class="mdc-layout-grid hidden">
		<div class="mdc-layout-grid__inner">
			<div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-mobile">
				<div class="mdc-card">
	          <div class="demo-card__primary" style="padding-left:1rem">
	            <h2 class="demo-card__title mdc-typography--title">Aktuell</h2>
	          </div>
				
				<ul class="mdc-list mdc-list--dense" id="current">
					<li class="mdc-list-item">
						<span class="mdc-list-item__graphic">
							<i class="material-icons" aria-hidden="true">access_time</i>
						</span>
						<span class="mdc-list-item__text val_date">
							<h:outputText value="#{indexViewController.currentSensorData[0].date}">
								<f:convertDateTime pattern="dd.MM.yyyy HH:mm:ss" timeZone="Europe/Berlin" />
							</h:outputText>
						</span>
					</li>
					
				</ul>
				</div>
			</div>
		</div>
	</div>

					<div class="mdc-card demo-card">
			          <div class="demo-card__primary" style="padding-left:1rem">
			            <h2 class="demo-card__title mdc-typography--title">3 Tage Temperatur</h2>
			          </div>
			          <div class="mdc-card__media mdc-card__media">
			          	<div class="chart" id="forecastchart"></div>
			          </div>
			          <div class="demo-card__secondary mdc-typography--body1 hidden">
						<ul class="mdc-list mdc-list--dense">
							<li class="mdc-list-item">
								<span class="mdc-list-item__graphic">
									<i class="material-icons" aria-hidden="true">arrow_upward</i>
								</span>
								<span class="mdc-list-item__text val_max">
								</span>
							</li>
							<li class="mdc-list-item">
								<span class="mdc-list-item__graphic">
									<i class="material-icons" aria-hidden="true">arrow_forward</i>
								</span>
								<span class="mdc-list-item__text val_avg"></span>
							</li>
							<li class="mdc-list-item">
								<span class="mdc-list-item__graphic">
									<i class="material-icons" aria-hidden="true">arrow_downward</i>
								</span>
								<span class="mdc-list-item__text val_min"></span>
							</li>
						</ul>

			          </div>
			        </div>
	<div class="mdc-snackbar"
	     aria-live="assertive"
	     aria-atomic="true"
	     aria-hidden="true">
	  <div class="mdc-snackbar__text">Ein Fehler ist aufgetreten</div>
	  <div class="mdc-snackbar__action-wrapper">
	    <button type="button" class="mdc-snackbar__action-button"></button>
	  </div>
	</div>
	
	<p class="mdc-typography--body1" style="text-align:right">Version: #{indexViewController.version}</p>
	</main>

	<script type="text/javascript"
		src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript"
		src="resources/script2.js"></script>
	<script
		src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
		
		<script>
	$(function() {
		google.charts.load('current', {
			'packages' : [ 'corechart' ]
		});

		google.charts.setOnLoadCallback(loadData);
        
        var drawer = new mdc.drawer.MDCTemporaryDrawer(document.querySelector('.mdc-drawer--temporary'));
        document.querySelector('.menu').addEventListener('click', () => {console.log("clicked");drawer.open = true;});
        
    	$(window).on("resize", function (event) {
    		drawChart();
    	});

	});
	</script>
	<script>

	</script>
</body>
</html>
